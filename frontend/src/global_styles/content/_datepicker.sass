//-- copyright
// OpenProject is an open source project management software.
// Copyright (C) 2012-2023 the OpenProject GmbH
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License version 3.
//
// OpenProject is a fork of ChiliProject, which is a fork of Redmine. The copyright follows:
// Copyright (C) 2006-2013 Jean-Philippe Lang
// Copyright (C) 2010-2013 the ChiliProject Team
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
//
// See COPYRIGHT and LICENSE files for more details.
//++

$datepicker--border-radius: 5px

@mixin disabled-day
  background: $spot-color-basic-white
  color: $spot-color-basic-gray-4
  pointer-events: none
  cursor: not-allowed

  &:hover
    border-color: transparent

@mixin non-working-day
  background: $spot-color-basic-gray-6
  color: $spot-color-basic-gray-3
  border-radius: 0
  pointer-events: none

.flatpickr-current-month
  display: flex !important

.flatpickr-calendar .numInputWrapper
  position: fixed
  left: 65%


.flatpickr-day
  &.flatpickr-disabled
    @include disabled-day
  &.flatpickr-non-working-day
    @include non-working-day

.flatpickr-calendar.inline
  box-shadow: none !important
  @include spot-caption

  .flatpickr-months
    min-height: 45px

    .flatpickr-current-month
      @include spot-body-small(bold)
      justify-content: center
      align-items: center

    .numInputWrapper
      position: relative
      left: 0

  .flatpickr-weekwrapper
    display: none

  .flatpickr-weekday
    color: var(--body-font-color)

  .flatpickr-weekdaycontainer,
  .flatpickr-days .dayContainer

    &:first-of-type
      padding: 0 1rem 0 0
    &:last-of-type
      padding: 0 0 0 1rem
    &:only-of-type
      padding: 0

  .flatpickr-prev-month
    padding-left: 0
  .flatpickr-next-month
    padding-right: 0

  .flatpickr-days
    .dayContainer
      box-shadow: none
      min-width: 283px
      max-width: 283px

      @media screen and (max-width: 679px)
        min-width: 267px
        max-width: 267px

      .flatpickr-day
        color: $spot-color-basic-black
        height: 30px
        line-height: 28px
        margin: 0
        border-radius: $datepicker--border-radius
        box-shadow: none !important

        &:hover
          border-radius: 0

        &.flatpickr-non-working-day
          @include non-working-day

          &.inRange
            color: $spot-color-feedback-info-dark

        &.today
          background: $spot-color-indication-current-date
          border-color: $spot-color-indication-current-date
          border-radius: $datepicker--border-radius

        &.selected,
        &.startRange,
        &.endRange
          background: $spot-color-main
          border-color: $spot-color-main
          color: $spot-color-basic-white

        &.startRange
          border-radius: $datepicker--border-radius 0 0 $datepicker--border-radius

        &.endRange
          border-radius: 0 $datepicker--border-radius $datepicker--border-radius 0

        &.endRange.startRange
          border-radius: $datepicker--border-radius

        &.inRange
          background: $spot-color-feedback-info-light
          color: $spot-color-basic-black
          border-color: $spot-color-feedback-info-light
          border-radius: 0

        &.flatpickr-disabled
          @include disabled-day

          &.flatpickr-non-working-day
            background: $spot-color-basic-gray-6
            color: $spot-color-basic-gray-4

            &.inRange
              color: $spot-color-basic-gray-5
              background: $spot-color-basic-gray-6
              border-color: $spot-color-basic-gray-6

          &.selected,
          &.startRange,
          &.endRange
            background: $spot-color-basic-gray-3
            border-color: $spot-color-basic-gray-3
            color: $spot-color-basic-gray-5

          &.inRange
            background: $spot-color-basic-gray-5
            border-color: $spot-color-basic-gray-5
            color: $spot-color-basic-gray-3

          &.today
            color: $spot-color-basic-gray-4

.flatpickr-calendar.flatpickr-container-suppress-hover
  .flatpickr-day
    &.inRange,
    &.startRange:not(.selected),
    &.endRange:not(.selected)
      background: transparent !important
      border-color: transparent !important
      color: black !important
